<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Happyblog</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="基于 vuepress 的简易博客平台">
    
    <link rel="preload" href="/vuepress-blog/assets/css/0.styles.631b7830.css" as="style"><link rel="preload" href="/vuepress-blog/assets/js/app.f8677ea4.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/2.32f56e5c.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/1.a930a345.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/19.4958156f.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/js/10.ab76fc9b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/11.8f72b06d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/12.428f6f98.js"><link rel="prefetch" href="/vuepress-blog/assets/js/13.eb47b2b6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/14.7257e695.js"><link rel="prefetch" href="/vuepress-blog/assets/js/15.bd1b03c3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/16.7a561afc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/17.cd516f79.js"><link rel="prefetch" href="/vuepress-blog/assets/js/18.42e9f2b1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/20.cd1f9a1c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/21.e4fea2d1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/22.0919633c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/23.331c698f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/24.5874fb5a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/25.e56a5813.js"><link rel="prefetch" href="/vuepress-blog/assets/js/26.7e912fb0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/27.aa11be6f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/28.b8505e46.js"><link rel="prefetch" href="/vuepress-blog/assets/js/29.155d9866.js"><link rel="prefetch" href="/vuepress-blog/assets/js/3.d7d8640a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/30.80297b92.js"><link rel="prefetch" href="/vuepress-blog/assets/js/31.977ccbdd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/32.767609f9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/33.44891ea8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/34.f516ab0b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/35.151a5daf.js"><link rel="prefetch" href="/vuepress-blog/assets/js/36.ece446f9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/37.37735106.js"><link rel="prefetch" href="/vuepress-blog/assets/js/38.45a9e8b8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/39.0fcd7dcc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/4.ecf7f9e8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/40.621682ab.js"><link rel="prefetch" href="/vuepress-blog/assets/js/41.d03d4354.js"><link rel="prefetch" href="/vuepress-blog/assets/js/42.edf41024.js"><link rel="prefetch" href="/vuepress-blog/assets/js/43.8cd60945.js"><link rel="prefetch" href="/vuepress-blog/assets/js/44.de2cd4e9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/45.4fb41246.js"><link rel="prefetch" href="/vuepress-blog/assets/js/46.b26d762d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/47.3bb572d2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/48.dc6af168.js"><link rel="prefetch" href="/vuepress-blog/assets/js/49.9511edba.js"><link rel="prefetch" href="/vuepress-blog/assets/js/5.8cea2090.js"><link rel="prefetch" href="/vuepress-blog/assets/js/50.2e05304d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/51.f72b0b54.js"><link rel="prefetch" href="/vuepress-blog/assets/js/52.1650a6e6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/53.36c638aa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/54.5931bcf4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/55.f48c6b88.js"><link rel="prefetch" href="/vuepress-blog/assets/js/56.6d799974.js"><link rel="prefetch" href="/vuepress-blog/assets/js/57.0abda071.js"><link rel="prefetch" href="/vuepress-blog/assets/js/58.e4e2e95d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/59.fc9cc726.js"><link rel="prefetch" href="/vuepress-blog/assets/js/6.5b653d91.js"><link rel="prefetch" href="/vuepress-blog/assets/js/60.d0cdc48d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/61.e663cede.js"><link rel="prefetch" href="/vuepress-blog/assets/js/62.1b3ef15b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/63.b17e2bda.js"><link rel="prefetch" href="/vuepress-blog/assets/js/64.3b7bc255.js"><link rel="prefetch" href="/vuepress-blog/assets/js/65.bb24c420.js"><link rel="prefetch" href="/vuepress-blog/assets/js/7.fcec5877.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~docsearch.a0f89813.js">
    <link rel="stylesheet" href="/vuepress-blog/assets/css/0.styles.631b7830.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-blog/" class="home-link router-link-active"><!----> <span class="site-name">Happyblog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vuepress-blog/miniVue2/" class="nav-link">
  mini-Vue2 文档
</a></div><div class="nav-item"><a href="/vuepress-blog/performance/" class="nav-link router-link-active">
  性能优化
</a></div><div class="nav-item"><a href="/vuepress-blog/chat/" class="nav-link">
  前端杂谈
</a></div><div class="nav-item"><a href="https://github.com/Nwu23787/mini-Vue2" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vuepress-blog/miniVue2/" class="nav-link">
  mini-Vue2 文档
</a></div><div class="nav-item"><a href="/vuepress-blog/performance/" class="nav-link router-link-active">
  性能优化
</a></div><div class="nav-item"><a href="/vuepress-blog/chat/" class="nav-link">
  前端杂谈
</a></div><div class="nav-item"><a href="https://github.com/Nwu23787/mini-Vue2" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端性能优化</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-blog/performance/前端性能优化的关键指标.html" class="sidebar-link">前端性能优化的关键指标</a></li><li><a href="/vuepress-blog/performance/页面加载全过程的优化策略分析.html" class="sidebar-link">页面加载全过程的优化策略分析</a></li><li><a href="/vuepress-blog/performance/首屏时间指标及采集方法.html" class="sidebar-link">首屏时间指标及采集方法</a></li><li><a href="/vuepress-blog/performance/其他性能指标的采集方法.html" class="sidebar-link">其他性能指标的采集方法</a></li><li><a href="/vuepress-blog/performance/仿渐进式图片优化首屏时间.html" class="active sidebar-link">仿渐进式图片优化首屏时间</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog/performance/仿渐进式图片优化首屏时间.html#_1-图片压缩" class="sidebar-link">1. 图片压缩</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/performance/仿渐进式图片优化首屏时间.html#_2-渐进式图片" class="sidebar-link">2. 渐进式图片</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/performance/仿渐进式图片优化首屏时间.html#_3-模拟实现渐进式图片" class="sidebar-link">3. 模拟实现渐进式图片</a></li></ul></li><li><a href="/vuepress-blog/performance/performance与performanceObserver的对比与实践.html" class="sidebar-link">performance与performanceObserver的对比与实践</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>之前在做博客管理端登录页的时候，给登录页的背景图选择了一个体积较大的高清图，上线之后发现加载登录页时，背景图长时间空白，并且大图展示时是从上到下一段一段加载的，用户体验很差。今天下定决心决定对其进行优化了。</p> <h2 id="_1-图片压缩"><a href="#_1-图片压缩" class="header-anchor">#</a> 1. 图片压缩</h2> <p>对于大图的加载，首先考虑到的是压缩。可以通过牺牲小部分图片质量，来换取较好的用户体验。正所谓 “ 图片不压缩，前端要背锅”，这里推荐一个压缩工具 <code>TinyPng</code>，它的压缩效果很好，而且带来的图片损失比较小。</p> <h2 id="_2-渐进式图片"><a href="#_2-渐进式图片" class="header-anchor">#</a> 2. 渐进式图片</h2> <p>什么是渐进式图片？首先我们要知道，一般的图片加载，是从上到下加载的：</p> <img src="/vuepress-blog/assets/img/image-20240504103257154.b9758142.png" style="zoom:33%;"> <img src="/vuepress-blog/assets/img/image-20240504103322602.324d1f73.png" style="zoom:33%;"> <p>加载完成的部分会在上面先展示出来，没加载完成的部分是空白，随着图片的加载，空白部分会被慢慢填充。实际上：没加载出来的部分，<strong>背景并不是空白，而是透明</strong>。</p> <p>对于渐进式图片，他的加载顺序并不是从上到下的，而是先加载一个模糊的图片，随着图片的加载，慢慢完善图片的细节，最后展示出一个清晰的大图。</p> <p>很显然，渐进式图片对于用户体验来说，要好很多，用户可以尽早的了解到图片大体内容是什么，而不是长时间面对空白。并且，在弱网环境下，我们甚至可以只下载渐进式图片的一部分，降低分辨率来减少流量。</p> <p><strong>将图片转为渐进式有以下几个办法</strong>：</p> <ol><li>jpg 使用 js-mozjpeg，</li> <li>png 使用 worker 将图片按照 Adam7算法(<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fchenzeze%2Finterlace-png-with-Adam7%2Fblob%2Fmain%2FAdam7.js" target="_blank" rel="noopener noreferrer">github仓库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)进行拆合来转换</li> <li>网络图片转换：如果是上传到阿里云oss 的图片，可以通过简单的 RESTful 接口，在任何时间、任何地点、任何互联网设备上对图片进行格式转换和显示控制。其他云服务器也有类似的处理。</li></ol> <h2 id="_3-模拟实现渐进式图片"><a href="#_3-模拟实现渐进式图片" class="header-anchor">#</a> 3. 模拟实现渐进式图片</h2> <p>在做登录页优化的时候，我并没有采用渐进式图片，而是模拟了渐进式图片的效果，也就是图片先模糊后清晰的效果。这也是之前很多网站都在使用的。</p> <p>模拟渐进式效果主要是利用了普通图片从上到下加载的性质，没加载的部分，背景是透明的，也就是说可以看到下层元素。所以，将模糊图片放在下层，将大图放在上层，这样当大图一点点加载出来的时候，就可以覆盖住模糊小图，达到先模糊后清晰的渐进式效果。</p> <p>代码：</p> <img src="/vuepress-blog/assets/img/image-20240504104425559.b5a71c29.png"> <img src="/vuepress-blog/assets/img/image-20240504104508389.6940a395.png"> <p>模糊小图是通过压缩得来的，我将原图压缩为5%得到了模糊小图。原图为1.83MB，而模糊小图的大小仅为 90.7KB，几乎可以做到打开页面，模糊小图就可以立即下载并展示到页面上。之后我们再慢慢等待大图下载，大图每下载一部分，都会遮住小图相应的部分，看上去就像是小图的那部分变清晰了。用户体验 UP ！</p> <p><strong>效果图：</strong></p> <p>可以明显看到，分界线上面部分是已经加载完的大图，而下半部分的大图还没有加载完，仍然展示的是模糊小图。</p> <p><img src="/vuepress-blog/assets/img/image-20240504105302344.bf45eeda.png" alt="image-20240504105302344"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-blog/performance/其他性能指标的采集方法.html" class="prev">
        其他性能指标的采集方法
      </a></span> <span class="next"><a href="/vuepress-blog/performance/performance与performanceObserver的对比与实践.html">
        performance与performanceObserver的对比与实践
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress-blog/assets/js/app.f8677ea4.js" defer></script><script src="/vuepress-blog/assets/js/2.32f56e5c.js" defer></script><script src="/vuepress-blog/assets/js/1.a930a345.js" defer></script><script src="/vuepress-blog/assets/js/19.4958156f.js" defer></script>
  </body>
</html>
