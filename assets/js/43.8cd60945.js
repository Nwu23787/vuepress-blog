(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{372:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"webview-入门"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webview-入门"}},[t._v("#")]),t._v(" WebView 入门")]),t._v(" "),s("h2",{attrs:{id:"什么是-webview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是-webview"}},[t._v("#")]),t._v(" 什么是 WebView")]),t._v(" "),s("p",[t._v("Android 系统中内置了一个的"),s("strong",[t._v("高性能浏览器")]),t._v("，而 WebView 就是"),s("strong",[t._v("在此基础上封装的一个组件")]),t._v("，一般是基于 "),s("strong",[t._v("webkit")]),t._v(" 引擎的，在 4.4 版本之后改为 "),s("strong",[t._v("Chrome")]),t._v("。经常用于在 APP 中显示网页等，并且支持前进后退等基于浏览历史，放大缩小，等更多功能。")]),t._v(" "),s("h2",{attrs:{id:"webview-的简单使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webview-的简单使用"}},[t._v("#")]),t._v(" WebView 的简单使用")]),t._v(" "),s("h3",{attrs:{id:"加载使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载使用"}},[t._v("#")]),t._v(" 加载使用")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//生成一个WebView组件(两种方式)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//方式1：直接在在Activity中生成")]),t._v("\nWebView webView "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//方法2：在Activity的layout文件里添加webview控件：")]),t._v("\nWebView webview "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("WebView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findViewById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webView1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//步骤2. 选择加载方式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//方式a. 加载一个网页：")]),t._v("\nwebView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.google.com/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//方式b：加载apk包中的html页面")]),t._v("\nwebView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file:///android_asset/test.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//方式c：加载手机本地的html页面")]),t._v("\nwebView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content://com.android.htmlfileprovider/sdcard/test.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("h3",{attrs:{id:"前进后退网页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前进后退网页"}},[t._v("#")]),t._v(" 前进后退网页")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//激活WebView为活跃状态，能正常执行网页的响应")]),t._v("\nwebView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onResume")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ；\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//当页面被失去焦点被切换到后台不可见状态，需要执行onPause")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过onPause动作通知内核暂停所有的动作，比如DOM的解析、plugin的执行、JavaScript执行。")]),t._v("\nwebView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onPause")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//当应用程序(存在webview)被切换到后台时，这个方法不仅仅针对当前的webview而是全局的全应用程序的webview")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//它会暂停所有webview的layout，parsing，javascripttimer。降低CPU功耗。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//****该设置在整个APP内生效****")]),t._v("\nwebView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pauseTimers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//恢复pauseTimers状态")]),t._v("\nwebView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resumeTimers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//销毁Webview")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在关闭了Activity时，如果Webview的音乐或视频，还在播放。就必须销毁Webview")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//但是注意：webview调用destory时,webview仍绑定在Activity上")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这是由于自定义webview构建时传入了该Activity的context对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//因此需要先从父容器中移除webview,然后再销毁webview:")]),t._v("\nrootLayout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("webView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \nwebView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("参考资料：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://juejin.cn/post/7000723495898316807?searchId=20240718094634C2E4EA090EE9826F640E",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebView-基础-掘金 (juejin.cn)"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);