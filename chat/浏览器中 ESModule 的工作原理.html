<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器中 ESM 的模块工作原理 | Happyblog</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="基于 vuepress 的简易博客平台">
    
    <link rel="preload" href="/vuepress-blog/assets/css/0.styles.631b7830.css" as="style"><link rel="preload" href="/vuepress-blog/assets/js/app.f8677ea4.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/2.32f56e5c.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/1.a930a345.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/25.e56a5813.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/js/10.ab76fc9b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/11.8f72b06d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/12.428f6f98.js"><link rel="prefetch" href="/vuepress-blog/assets/js/13.eb47b2b6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/14.7257e695.js"><link rel="prefetch" href="/vuepress-blog/assets/js/15.bd1b03c3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/16.7a561afc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/17.cd516f79.js"><link rel="prefetch" href="/vuepress-blog/assets/js/18.42e9f2b1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/19.4958156f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/20.cd1f9a1c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/21.e4fea2d1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/22.0919633c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/23.331c698f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/24.5874fb5a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/26.7e912fb0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/27.aa11be6f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/28.b8505e46.js"><link rel="prefetch" href="/vuepress-blog/assets/js/29.155d9866.js"><link rel="prefetch" href="/vuepress-blog/assets/js/3.d7d8640a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/30.80297b92.js"><link rel="prefetch" href="/vuepress-blog/assets/js/31.977ccbdd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/32.767609f9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/33.44891ea8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/34.f516ab0b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/35.151a5daf.js"><link rel="prefetch" href="/vuepress-blog/assets/js/36.ece446f9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/37.37735106.js"><link rel="prefetch" href="/vuepress-blog/assets/js/38.45a9e8b8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/39.0fcd7dcc.js"><link rel="prefetch" href="/vuepress-blog/assets/js/4.ecf7f9e8.js"><link rel="prefetch" href="/vuepress-blog/assets/js/40.621682ab.js"><link rel="prefetch" href="/vuepress-blog/assets/js/41.d03d4354.js"><link rel="prefetch" href="/vuepress-blog/assets/js/42.edf41024.js"><link rel="prefetch" href="/vuepress-blog/assets/js/43.8cd60945.js"><link rel="prefetch" href="/vuepress-blog/assets/js/44.de2cd4e9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/45.4fb41246.js"><link rel="prefetch" href="/vuepress-blog/assets/js/46.b26d762d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/47.3bb572d2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/48.dc6af168.js"><link rel="prefetch" href="/vuepress-blog/assets/js/49.9511edba.js"><link rel="prefetch" href="/vuepress-blog/assets/js/5.8cea2090.js"><link rel="prefetch" href="/vuepress-blog/assets/js/50.2e05304d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/51.f72b0b54.js"><link rel="prefetch" href="/vuepress-blog/assets/js/52.1650a6e6.js"><link rel="prefetch" href="/vuepress-blog/assets/js/53.36c638aa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/54.5931bcf4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/55.f48c6b88.js"><link rel="prefetch" href="/vuepress-blog/assets/js/56.6d799974.js"><link rel="prefetch" href="/vuepress-blog/assets/js/57.0abda071.js"><link rel="prefetch" href="/vuepress-blog/assets/js/58.e4e2e95d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/59.fc9cc726.js"><link rel="prefetch" href="/vuepress-blog/assets/js/6.5b653d91.js"><link rel="prefetch" href="/vuepress-blog/assets/js/60.d0cdc48d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/61.e663cede.js"><link rel="prefetch" href="/vuepress-blog/assets/js/62.1b3ef15b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/63.b17e2bda.js"><link rel="prefetch" href="/vuepress-blog/assets/js/64.3b7bc255.js"><link rel="prefetch" href="/vuepress-blog/assets/js/65.bb24c420.js"><link rel="prefetch" href="/vuepress-blog/assets/js/7.fcec5877.js"><link rel="prefetch" href="/vuepress-blog/assets/js/vendors~docsearch.a0f89813.js">
    <link rel="stylesheet" href="/vuepress-blog/assets/css/0.styles.631b7830.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-blog/" class="home-link router-link-active"><!----> <span class="site-name">Happyblog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vuepress-blog/miniVue2/" class="nav-link">
  mini-Vue2 文档
</a></div><div class="nav-item"><a href="/vuepress-blog/performance/" class="nav-link">
  性能优化
</a></div><div class="nav-item"><a href="/vuepress-blog/chat/" class="nav-link router-link-active">
  前端杂谈
</a></div><div class="nav-item"><a href="https://github.com/Nwu23787/mini-Vue2" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vuepress-blog/miniVue2/" class="nav-link">
  mini-Vue2 文档
</a></div><div class="nav-item"><a href="/vuepress-blog/performance/" class="nav-link">
  性能优化
</a></div><div class="nav-item"><a href="/vuepress-blog/chat/" class="nav-link router-link-active">
  前端杂谈
</a></div><div class="nav-item"><a href="https://github.com/Nwu23787/mini-Vue2" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端杂谈</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-blog/chat/浏览器指纹.html" class="sidebar-link">浏览器指纹</a></li><li><a href="/vuepress-blog/chat/浏览器中 ESModule 的工作原理.html" class="active sidebar-link">浏览器中 ESModule 的工作原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog/chat/浏览器中 ESModule 的工作原理.html#_1、es-module" class="sidebar-link">1、ES Module</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog/chat/浏览器中 ESModule 的工作原理.html#_2-、浏览器中是怎么执行-esm-的" class="sidebar-link">2 、浏览器中是怎么执行 ESM 的？</a></li></ul></li><li><a href="/vuepress-blog/chat/浏览器中的事件循环.html" class="sidebar-link">浏览器中的事件循环</a></li><li><a href="/vuepress-blog/chat/资源提示符.html" class="sidebar-link">资源提示符</a></li><li><a href="/vuepress-blog/chat/node模块查找策略.html" class="sidebar-link">node模块查找策略</a></li><li><a href="/vuepress-blog/chat/requestAnimationFrame.html" class="sidebar-link">requestAnimationFrame</a></li><li><a href="/vuepress-blog/chat/WebView 入门.html" class="sidebar-link">WebView 入门</a></li><li><a href="/vuepress-blog/chat/CSS 属性值的计算.html" class="sidebar-link">CSS 属性值的计算</a></li><li><a href="/vuepress-blog/chat/浏览器渲染原理.html" class="sidebar-link">浏览器渲染原理</a></li><li><a href="/vuepress-blog/chat/跨标签页通信的方案与实践（上）.html" class="sidebar-link">跨标签页通信的方案与实践（上）</a></li><li><a href="/vuepress-blog/chat/跨标签页通信的方案与实践（下）.html" class="sidebar-link">跨标签页通信的方案与实践（下）</a></li><li><a href="/vuepress-blog/chat/Web Worker 简介.html" class="sidebar-link">Web Worker 简介</a></li><li><a href="/vuepress-blog/chat/渲染中的分层与合成.html" class="sidebar-link">渲染中的分层与合成</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器中-esm-的模块工作原理"><a href="#浏览器中-esm-的模块工作原理" class="header-anchor">#</a> 浏览器中 ESM 的模块工作原理</h1> <h2 id="_1、es-module"><a href="#_1、es-module" class="header-anchor">#</a> 1、ES Module</h2> <p>ES modules 是原生 JavaScript 提供的模块功能，现在几乎所有的浏览器都支持了 ES Module 方式，比如 Vite 就是利用了这一点。Vite 不会像 Webpack 一样，将代码降级成 ES5，然后再将多个模块打包在一起，交给浏览器运行。而是直接将代码推送给浏览器运行，当浏览器遇到 import 语句时，再去加载对应的模块，这也就是我们在开发环境中为什么用 Vite 启动项目比 Webpack 快的原因。</p> <p>ES Module 通过 import 关键字和 export 关键字进行模块的导入与导出。每个模块的<strong>作用域独立</strong>，变量不会相互污染。</p> <h2 id="_2-、浏览器中是怎么执行-esm-的"><a href="#_2-、浏览器中是怎么执行-esm-的" class="header-anchor">#</a> 2 、浏览器中是怎么执行 ESM 的？</h2> <p>我们用以下的例子来进行讲解：</p> <h3 id="_2-1-解析"><a href="#_2-1-解析" class="header-anchor">#</a> 2.1 解析</h3> <p>首先，对于 index.html：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;module&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;./main.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre></div><p>浏览器执行到 script 标签时，做的第一件事就是模块的解析。（注意：是解析，而不是运行！）解析的第一步就是补全 URL 地址，因为我们写的 URL 是一个相对路径，浏览器会将相对路径<strong>补全</strong>为一个绝对路径（包括协议、域名、端口号等等）。然后<strong>进行模块的下载</strong>，下载之后，就会拿到 main.js 的代码了，接着对 main.js 进行解析：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> fox <span class="token keyword">from</span> <span class="token string">'./fox.js'</span>

<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./dynamic.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> fox<span class="token punctuation">,</span> pig<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> pig <span class="token keyword">from</span> <span class="token string">'./pig.js'</span>
</code></pre></div><p>解析 main.js 的第一步，浏览器会找到 main.js 中所有的顶级静态导入语句（顶级：全局作用域下的），也就是 fox 和 pig，那么浏览器就会将这两行导入语句给提升到全局作用域的最顶部：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> fox <span class="token keyword">from</span> <span class="token string">'./fox.js'</span>
<span class="token keyword">import</span> pig <span class="token keyword">from</span> <span class="token string">'./pig.js'</span>

<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./dynamic.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> fox<span class="token punctuation">,</span> pig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>所以，我们在书写代码的时候，应该自己就把 import 语句书写在最顶部，书写在中间或者尾部其实是错误的，只不过浏览器有纠错的功能，帮我们纠正过来了而已。</p> <p>浏览器将顶级静态导入语句提升的目的就是，获取到所有的导入语句，并进一步对这些导入语句解析，也就是 <strong>URL 地址补全 + 静态解析</strong>。等这两个 js 代码下载完成，同样会进入这两个代码文件中，进行<strong>递归</strong>的解析。</p> <p>首先会解析 fox.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// fox.js</span>
<span class="token keyword">import</span> pig <span class="token keyword">from</span> <span class="token string">'./pig.js'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fox'</span><span class="token punctuation">,</span>pig<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">'fox'</span>
</code></pre></div><p>浏览器对 fox.js 进行解析时发现，pig.js 其实已经下载过了，或者是正在下载中，那么它不会去重复的执行下载。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// pig.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pig'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">'pig'</span>
</code></pre></div><p>可以发现，pig.js 中没有依赖其他的模块，那么当前阶段的<strong>解析就结束了</strong>。</p> <h3 id="_2-2-模块执行"><a href="#_2-2-模块执行" class="header-anchor">#</a> 2.2 模块执行</h3> <p>在这个过程中，浏览器才会真正的去执行代码。首先回到入口文件进行执行，执行的过程就是从上到下执行每一行代码。</p> <p>对于 main.js：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> fox <span class="token keyword">from</span> <span class="token string">'./fox.js'</span>
<span class="token keyword">import</span> pig <span class="token keyword">from</span> <span class="token string">'./pig.js'</span>

<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./dynamic.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> fox<span class="token punctuation">,</span> pig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>执行 main.js 的第一行代码，由于第一行代码是链接到 fox.js ，那么就进入到 fox.js 里面的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> pig <span class="token keyword">from</span> <span class="token string">'./pig.js'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fox'</span><span class="token punctuation">,</span>pig<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">'fox'</span>
</code></pre></div><p>执行 fox.js 的第一行代码，由于第一行代码是链接到 pig.js ，那么就进入到 pig.js 里面的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pig'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">'pig'</span>
</code></pre></div><p>执行 pig.js 的代码，打印了语句 'pig'，执行完成之后，会默认导出一个字符串 'pig'</p> <p>浏览器对于导出语句的处理，是通过生成映射表的防抖来进行的。具体来说，就是在内存中，针对 pig.js 开辟了一个表格，用来记录这个模块它导出了什么：</p> <img src="data:image/png;base64,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ysrKBgwYcBTX/uIXv+jQoUO/fv0qKiqeffbZYziqyZMnl5WV3X777cfwawZVnAn72GOPnXfeeZ07dz7SC0eOHDl9+vROnTod6YWrV6+ura296qqrjvRCgKZhFhaOjYULF373u99t27bt2LFjS0pKOnToUOgRnZyKMGHXr1+/atWqUaNGNeWTPvfccyUlJVdeeWVTPinABydh4diYNm1aSmnq1KlNlhrz5s2bN2/eT3/6065duzbNM54IinB3rpqamuHDh1999dXZI88///zzzz/ft2/fSy65ZNGiRfPmzdu6dWv37t0vueSSK664IvfaBx54YPv27SNGjDj77LNzjz/33HNz587dtGlTeXn5l7/85WHDhv3617/etWvX17/+9bPOOiul1KJFi9tvv71jx45N83cEOFISFo6NNWvWpJT69+/fZM/4ve99b+PGjZMnT26yZzwRFOHuXIMHDx48eHDukWeeeWbixIm33XbbU0899aMf/Sh7/Oc///n1119/3333ZddMT5kyZfXq1f369csmbH19/Z133nn33Xdnr3r44YeffPLJpUuXvvbaawMHDswk7E033XTc/2IAjWAtLBwbe/fuTSm1bt260AM5yRXhQoJDWbBgwfTp02fNmrVz586dO3fef//9ZWVlDzzwwG9+85vDXDV16tS777771FNPnT179o4dO958883777//0UcfPdLbHQAUlllYitq+fftmzJhRVVW1Z8+e888//4YbbjjUmW+88cb06dNXrFjRsmXLiy66aMSIEV26dMl8atq0abW1tZmEnTZt2umnn/7hD3/4m9/8ZkrpnXfeefjhh1etWrVp06b27dv36tXrW9/6Vu5dijK/583+9jZjz54999xzT0lJybhx4953MPfee+/u3bt3796dUrr//vsz625vvfXWU0455Rh8U05sEjarpqbm2Wefzb71cPTo0fX19WPGjJk0adLo0aNLS0vfe8nbb7/9gx/8IKX02GOPDRkyJHvhKaec0sRrbQEa6yA0Tu6b9xctWlTo4RyBDRs2fOpTn8r959CqVavx48enlD796U/nnvncc8+deeaZKaVmzZplyuC0005bsGBB5rO59Znx8Y9//ODBg6+88kp5eXn2K2c+6Nat265du7JfuWfPnimlZcuW5T7dtm3bUkqlpaXZI5MmTUopVVZWZh6ec8457/23XFtbe5y+USeUJ598MvdvPXjw4EKPqAAmTJiQUvrsZz+bd3z//v2Zm8Ft2rQpcyTzAsv+w8zcILZnz54NDQ25F9bV1WVeonkvRaKI+3MYjpqFBBSpurq6L37xi9XV1QMGDKiurt63b9+aNWuGDh2amaPKtWHDhsGDB+/cufPee+/ds2fPnj17Hnzwwf37948aNWrHjh0ppQULFlRVVZ122mkppfnz51dVVc2aNSul9Oabb7Zr127u3LmbN2/eu3dvTU1Nr1691q9f/8Mf/rCRg3/00Uerqqo+8pGPpJTmzJlTVVVVVVVVJLegNwubdeGFF+YdOeWUUzK/HDjUdlx///vfU0oVFRV538bS0tKPfvSjx2eYAMeFhQQUqQcffHDt2rUXXHDB008/nfn9+wUXXDB//vyLL7542bJluWfeeuut+/fvnzJlyo033pg5MmrUqL/+9a8/+9nPpk6dOnHixL59+6aUMm+g6du3b/bmnZ/4xCfWrFmTnX/t0qXLXXfddfnlly9atKiRg+/Tp0/6/zO7FRUVPXr0aOQXDETCZp166qnvPZj5huR9l7I2btyYUnrf28Qe6hKAE5NZWIrU3LlzU0rjxo3LXT9aWlr6jW98I/e02tra3//+923bts1bJnvppZemlFavXn2YpygvL8/doOvtt9/OfHB0G9aTIWGzMsuvcx08eHDTpk0ppUPdZ619+/YppX//+9/vvXDr1q3HYYwAx4tZWIpU5v3XFRUVecfPPffc3Idr165NKdXX1+fdLeudd95JKa1fv/7wz7J27dqHHnpo8eLF69at2759e+bg/v37Gzf2oiZhs1atWpV35Omnn963b195efmhtuPKpG1VVVV9fX3u+71efvnlPXv2HL+hAhxzZmEpRgcOHNiyZUtKKbOcNFdeIWWmphoaGt76bwcOHOjateuHPvShwzzLrFmzevbsedddd+3YsWPIkCETJkyYMmXKsf6rFB0Jm7Vs2bJHHnkk+3D37t2ZNyPedttteRtAZH3hC19o27btunXrfvWrX2UP7t2795ZbbjneowU4tszCUoxatGjRvn37Xbt2bdu27Ywzzsj91ObNm3MfZt7737Fjx/9zwjXP9u3bx4wZU19f/+STTw4dOjT7xW+++ebc0zIzYXm/ETYfdhh5cVYMWxscyvnnnz9ixIg//elPn/vc5zZv3vzb3/523bp15557bmVl5aEu6dChw7hx477//e/ffPPNL7744uc///k33nhj5syZ9fX1nTt3znvxA5zIJCxFqmvXrrt27Vq8ePFFF12Ue/zZZ5/NfditW7eU0saNG7ds2fLem2cdRnV19d69e/v375/t15TSK6+8knfaWWedVV1d/Y9//CP34Msvv/zBn6i+vv6Dn3wSMAub9aUvfenCCy8cPXr0jBkzMkcuu+yyOXPmvO/bvLLuuOOOsrKycePGzZ49e/bs2Smlfv36zZs3b+DAgSmlYri1MHBysJCAIjV8+PCU0uTJk3PfxbJkyZKZM2fmnta2bdvMmZWVlXV1dbmfWrZs2WFWtWYmC7dv3569av/+/RMnTsw7rXv37imlmTNnZmcT33333dzNPw8j89acmpqaD3LySUPC5rr++uv/+c9/Pvroo3Pnzn355Zf/+Mc/Zl4VWU888URNTU2/fv2yR0pKSm677bYdO3b85S9/eeihh6qrq5cuXXrWWWdlpmDzfikBcMIyC0uR+va3vz1lypRNmzb17t37O9/5TpcuXV566aVp06YNHjz4qaeeyj3z7rvvXrhw4fz58/v27Tty5MguXbpkdkX6wx/+UFtbm7mT/Hv17t379NNPX79+/ZVXXnnttdfu3Lnzvvvua948/1/cmDFjfvnLX1ZVVQ0dOvSrX/3q3r17Z8yYcaiFjHk++clPrly5cuzYsTt27Fi3bt2dd95ZDLeGlbB5zjzzzKuuuuown33f4+Xl5YMGDco+rK6urqura9++ffaWcAAnOAlLkSorK1uyZMnw4cOXLl2aeRNM8+bNx44dO2DAgLyEPe+881asWHHNNddUV1evXLkyc7BNmzaVlZW598zK0759+zlz5lx77bWPP/74448/nlIaMGDAfffdd8EFF+Se1q1bt1mzZt14443PPPPMM888k1K6+OKL77nnnsymSoc3fvz4RYsWvfrqq9ddd11K6Y477jji70JAEraRamtr81Ya/Oc//xk7dmxK6eqrr3Z3WCAKCUvx6ty5c1VV1YYNG1auXNmyZct+/fp16NDh3XfframpyZtb7dGjxwsvvLBixYrXX3+9ZcuWZ599do8ePTLbcWVVV1c3NDR07Ngxe+SKK65Yv379iy++uH379o997GO9e/duaGioqanJq4QRI0Zcdtllq1ev3rJlS/fu3fv06ZM5Lfec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" alt="image-20240503093508442" style="zoom:67%;"> <p>用表格记录的目的是为了<strong>缓存</strong>，将来如果还有别的模块中再依赖了这个模块，那么就不用再执行这个模块了，直接来内存中的这个表格中取值就可以了。</p> <p>此时 pig.js 就运行完成了，运行完成之后，回到 fox.js 中去，继续执行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> pig <span class="token keyword">from</span> <span class="token string">'./pig.js'</span>
</code></pre></div><p>此时需要报 pig.js 默认导出的东西放到我们指定的 pig 变量里面，这个过程<strong>不是简单的赋值</strong>，而是叫做<strong>符号绑定</strong>。具体来说，pig.js 表格中的 default 和我们这个标识符 pig，指向了内存中的同一块空间。这种现象在整个 JS 中都是绝无仅有的。</p> <p>导入语句执行完成，下面执行 log 语句，打印出 <code>fox pig</code></p> <p>之后执行导出语句，形成一个表格：</p> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgUAAAELCAIAAADGHGK3AAAaCUlEQVR4nO3de1BU58HH8WfPslxXXFxFId7RxKDWS8d77GRqjRVjaiVNrFO10aqt9VLHWtvpVDK51KqxMbWZTprWVp1JIhG1xiQGTEzEFi/gGJyoqAhDxGhYgqDCXlj2/eO8776bRSmw59n1ge/nD8c9e/Y5zy67+9vndo7J5/MJAECnp0W6AgCA+wJ5AAAQgjwAAOjIAwCAEOQBAEBHHgAAhCAPAAA68gAAIIQQUe14jM/nq6+vv3Tp0u3btw2vEACgraKjowcOHNi9e/dQCmlPHjidzqNHj77yyiuVlZWhHBsAYIjExMTZs2cvX748Jiam/aX42q6ysvL73/++cU8EABCqnj17FhcXt+Mr3a894wcej+fq1auGPxkAQLs1NDSUlJSEUkJ7+osCWSyWtLS0pKSkEMsBALSV2+0uKirS/69pWs+ePUMpLdQ8sNlsa9asGTduXIjlAC3TZzFUV1dbLJYePXpERYX61gU6AIfDkZmZWVNTo9/UtJCmjIb6oYqJiRk+fPjw4cNDLAdogc/n+/LLL3Nzc0+ePGmz2aZNmzZ+/HgiAXA4HEOGDCkoKDCkND5RUEB9ff2HH364atWqmpoai8Xyn//8Z/v27f369Yt0vYAOhfVoUEBNTU1BQYHeKPZ4POXl5SdPnox0pYCOhjyAAhobG2/duuW/6fF4amtrI1gfoEMiD6AGk8kUeJPrvAKGIw+gBvIAkI08gBoC84AwAGQgD6AkIgEwHHkABZhMJvqLANnIA6iBPABkIw+gBsYPANnIAyiA/iIgDMgDqIE8AGQjD6CGoP6ipqamCFYG6JDIAwCAEOQBlMD4ARAG5AHUQB4AspEHUAN5AMhGHkABhAEQBuQB1EAkALKRB1ADeQDIRh5ADeQBIBt5AAUEzTf1+XzkAWA48gBqoH0AyEYeQA3kASAbeQAFNA8D8gAwHHkANQRFAgDDkQdQA/1FgGzkAdRAHgCykQdQQPPOIvIAMBx5ADVw/WRANvIAaqC/CJCNPIACml8Ph+tlAoYjD6AGzlcByEYeQA2sPwBkIw+gBsYPANnIAyiA+aZAGJAHUAPzTQHZyAOogf4iQDbyAGogDwDZyAMogPEDIAzIA6hB0772XiUPAMORB1AD69EA2cgDKID+IiAMyAOogfFkQLaoSFcAaBXWH7SV0+k8f/68y+UaOnRoly5dIl0dKID2AZREJATatWtXYWFh4Jbs7OwHHnhg9OjREyZM+Pvf/27gsa5cufK3v/3t9OnTBpaJ+wR58L9CGaL0+XyNjY0ej8fwkzAzcKprfr5rXha/CxcuzJ8//9KlS/4txcXFc+fOraurW7Zs2fr16wcPHmzg4Xbs2LF48eLq6moDy8R9gv4iIYRwuVzV1dUmk6lHjx5RUW17TVwul8PhuHz5stvtTk9P79Wrl9lsNqRWDQ0NtbW1mqbZbLbo6GhDylQXeXAvOTk5QojJkyf7t7z++uter3fdunV/+MMfDD/c0aNHu3Xr9uijjxpeMiKO9oEQQhQVFY0bN2769OmVlZVteqDH43njjTe+/e1vZ2RkzJo1Kzs7u7a21qha5ebmTp8+fd68eWfOnDGqTHUx3/Re9uzZM3DgwN69e/u3lJSUCCEmTpxo+LFcLtfx48dnzZplsVgMLxwRR/sgJPn5+Rs3bnQ4HPPmzUtNTR0xYoTsH/KNjY0ulysqKio6OrpTXRKgUz3Z1rt8+fKZM2d+/OMfB26sr68XQsTHxxt+uFOnTjmdzieffNLwknE/IA9C8q9//evGjRsrVqxYvnx5cnJyGI54/Pjxt956a+zYsbNmzUpMTAzDEe8HjB/cS1lZ2dNPPz1nzhz95htvvFFRUfH5558LId58883CwkKz2bx27Vr93qampr179+bm5lZWVkZHR6enpz/zzDODBg3S73W73a+88orX633iiSfS09P9hygqKsrLy0tOTl64cGFdXd3cuXOnTJkS3meJMCEPQlJRUdHQ0JCenh62+XzvvPPOjh07kpOTO9sFhLl+8l1NnTp16tSp/pt//etfP/nkE/3/27dvF0LExMToeVBaWrpo0SL/vUKI/fv3v/zyy5s3b/75z38uhIiOjr527drWrVvffffdo0eP6i+4x+OZN2/e+fPn9+zZI4TIyMjIyMgI4/NDWHXS8QO3211fX3/nzp2Ghgav13uvH5s+n8/lcul7Op1Or9frv8vj8eh3eb1eTdP0m/qXlM/n83g8Tqfzzp079fX1Tqcz6MtL7/NpbGwMPK7+KJfLFXiU5o/S79X/H1SlzoPGwb1s27YtPz9/2LBhQog//vGP+fn5H374oRDC6XROmzbtk08+mTJlSlFRkdPprKio2LRpU2Nj4/Llyz/44AP94c8//3y/fv2OHTu2b98+fcurr756/vz5p556KjMzM1JPCmHT6doHTU1NN2/e3L1799GjR2tqavr27Ttnzpy7RoLX6/3iiy+ys7MLCgq8Xu+gQYNmzpw5cuRIq9VqMpn27Nlz+fLl0tLSpqamnJycs2fP2u32p556qlevXjU1NYcPHz5x4kRZWZnFYnnwwQczMzPT09NjYmL0kvPy8s6cOTN58uRvfvObcXFx+kaXy7Vv376LFy9mZmbqn+cgR44cOXXq1PHjx91ud35+vtvtjo2NnTZt2tixY42a0XTfor+olYYPHy6E6Nq1q/7/Rx55RN++cePG0tLS8ePHf/DBB/q7pU+fPmvXro2NjV25cuWqVavOnTunaZrVav3LX/6SkZHxq1/96vHHH79582ZWVlb37t3//Oc/R/BJIXx8bVdeXj5mzBj94b179z5+/Hg7ComUkpKSKVOmxMXFxcfHd+nSxWq1Wq3WJUuWJCUljRgxory8XN/N6/UeO3ZszJgxCQkJiYmJNptN3//3v/99VVWVz+d78sknbTab/tGKiYmJj49PT08vKiq6cuXKlClTEhISrFar3W7v2rWrxWJJSUnZt2+f0+nUC1+5cmViYuLGjRurq6v9FaupqXniiSc0TXvzzTf1Lfv37x85cuRjjz124sQJn8/329/+Njk5WZ/XYbFY4uPjExIStm3b5na7w/oKRkJ1dfWmTZv8b1qbzbZq1apIV+r+NWnSJCFEXl6efrOpqUmfffTee+8F7dnQ0KB3dZaVlfk3zp07VwixdevWRYsWCSF2794dvqqjjaqqqiZMmOD/XBw7diyU0jpXf5HT6Vy8eHF+fv64cePefffda9eunTlzZv78+dnZ2Tdv3gzcs7y8fMmSJRcuXFi3bt358+f1hkLfvn03bNhw+vRpj8fz/PPPv//++2PGjDGbzVlZWe+///6uXbsefPDB+vp6m822fv36kydPXr169eLFiwsXLmxoaNi5c+eVK1dCqfzixYvfeeedp59+Oi4ubsGCBfv27cvLy8vMzGzrgglF0T5ot9ra2qtXrwohRo8eHXRXbGxsWlqaEOLixYv+jS+//HK3bt2ysrK2b9+emZn5gx/8IJy1RQR1iq8Sv+zs7LNnz6alpe3YsaNPnz4mk8lqtW7btq2mpmb//v3+3Xw+30svvfT555+vWrVq2bJldrtdCDFjxozS0tINGzbs3r07PT19yJAhQgibzWYymYYMGTJu3Di9O6h///47d+6MjY3Vz9cfGxu7cOHCwsLCs2fPfvXVV6FUvl+/fv369UtNTTWbzX369Bk7dqzNZgvp5VAWYdAmDQ0N+n+6d+/e/N6kpCQhxPXr1/1bkpOTf/jDH7766qtCiKVLlzLTt/PoXO2DAwcO1NfXL1myxG63+9/lmqbNnj07cO7mnTt3jhw54vV6Z8yYERcX1/B/hg8fbrVaL1265P+ANZeQkBAXF+f1ep1OZ319fVVV1e3bt5uamm7cuKHPCkc7MH4Qip49eyYkJAgh9FZCEH1jjx49/FvOnj37+uuvDxw4UAixZs0at9sdrpoiwjpX+6C8vLyxsXHYsGFBq8YeeOCBwPWWZWVlbrfb6/X+5Cc/8Q8CCyGcTmdlZaXP53M6nfc6hNfrvXLlysGDBz/66KNz585dv37d4/F4vd7o6GimSIaCPGg3TdPS09NPnTr13nvv/exnPwu8q6Ki4sqVK2azedy4cfoWl8s1b948t9u9c+fO1157bdeuXS+88MJzzz0XiYoj3DpR+6CxsfHGjRter9dutwddfDGIw+HQJ4O6vs5kMuknBrjXImSfz3fo0KHMzMxf//rXJSUlo0eP/sUvfrF582a9cymQyWTiG61NyINQrF69Wgjx7LPPlpaW+jc2NjauXbvW6/WuXr26W7du+sasrKxPP/104cKFkyZN2rhxoz6HgrOZdhKdqH0QFRWVlJR07do1PRUC52hev369sbHRfzM1NdVisdjt9gMHDjz88MOtP0RNTc2WLVtKSkpefPHFhQsX6p+xqqqqffv2BQ4mm81mk8kUtNSgoaEhsA4IFNRfpM+FiGB9lDNnzpydO3ceOnRo1KhRP/3pT0eMGHHjxo09e/YUFBQMHjw4KytL3+3YsWObNm2y2+0bN24UQqSkpDz77LNr1qx55plnTp06xUkVO7xO1D4QQvTv3z8qKqqgoCCww8fn8504cSKwc79Pnz6xsbFffPFFRUVFUOdpy19Dly9frq6uHjx48KOPPur/wVVWVnb79u3A3ex2e2xs7I0bN+7cuePfWF5eHjTH6a70r8WmpqbO1vtE+yAUJpPpwIEDzz33XENDw+bNm3/0ox+tWbOmoKBg6dKlRUVFVqtVCHHr1q358+f7fL5Nmzb5R55XrFgxdOjQ4uLiF198MaLPAOHQidoHQoiZM2ceO3bstddemzFjxsiRI6Oionw+X1FR0VtvvVVXV+ffLT4+PiMjo7KycvPmzQMGDEhLS9O/jHw+X3Fxcb9+/Ww22117nDRNM5lMNTU1d+7c8Xq9eiNg165dgY10IURqaqrVaj1y5EhmZqY+zcnlcuXk5Jw/f/6/PoWEhITY2Niqqqra2lp9dlMnmf5BHrTe22+/7XK5evbsGbjRYrH87ne/W7ZsWUFBQXV1tc1mGzt2bEpKin8Hs9n80UcfCSH69u0b+Kj8/Pza2toOv+YRorPlwbx58/7xj38UFhbOnDlzwYIFQ4YMuXDhwj//+c/09HSHwxG458qVKw8fPvzxxx9/73vfy8zMHDp0qMPhKCgoOHTo0P79+/X1Ps099NBDKSkp586dW7du3Zw5c6xWq37Cu6Avr+9+97vZ2dm5ubmrV6+eNWtWcnJyXl6efg6y/6pv3752u33v3r1RUVG9evWaNGnSxIkTO8kShEDkQQsCv+WD2O32xx9//K53xcfH9+/fv/n2pKQkfU4qOrzO9T0SGxubk5OzbNmy3NzcLVu2CCGioqIWL1782GOPrVixIvAnf+/evXNycn75y1/m5uZu2LBB3xgXFzd79uw+ffr499Q0TR8M0G926dIlKyurvr7+xIkTp06dEkJ84xvfWL9+/datWwsLC/27paSk/OY3v2loaCgoKHjhhReEEA8//PDatWt37959+PDhwB/CmqYFNUQyMjIKCwt37dqln0Jgy5Yt/tWJHVjz8YMIVgboqDpXHgghUlJScnJyKioqiouLhRCjRo1KTU31eDz//ve/NU0LPGf1gAED3n777XPnzpWUlDQ1NaWmpg4ePNhutwc2nLdv3+50Ort37+4fahs/fvzBgwc/++yzioqKnj17jhw5skuXLhMmTHC5XIGFf+tb3zp48OClS5fKysr0U2XYbLbp06fX19f7Z4JPnTpVX/8cuO6sR48eL7300tKlS0tLS7t27Tps2LBOcmUS+osA2TpdHgghNE3r379/YNPYbDYHXl4qcM9hw4bd9exyuqAuWl2XLl3Gjx8/fvx4/5ZevXo1381qtY4aNWrUqFH+LUFXUIiPj7/rJU1iYmJarlWHRB4AsnWu+UXoMMgDwHDkARTA+gMgDMgDqKHlJeUAQsdnDErqbMvxgDAgD6AAzm8KhAF5ADWw/gCQjTyAGmgfALKRB1BA83M0kQeA4cgDqIH2ASAbeQA1MH4AyEYeQA20DwDZyAMogPEDIAzIA6ghaH0yeQAYjjyAGjh/ESAbeQAF0F8EhAF5ADUwngzIRh5ADeQBIBt5ADWw/gCQjTyAAhg/AMKAPIAa6C8CZCMPoAbyAJCNPIAaGD8AZCMPoIDm10fjepmA4cgDqIH+IkA28gBqoL8IkI08gAKYbwqEAXkANdBfBMhGHkAN5AEgG3kANZAHgGzkARRAGABhQB5ADUQCIBt5ADWQB4Bs5AEUELQ+metlAjKQB1AD7QNANvIAaiAPANnIA6iBPABkIw+ggOZhQB4AhiMPoIbmpzACYCzyAGqgvwiQjTyAGsgDQDbyAArgfNdAGJAHUIOm/f97lTAAZCAPoAaunwzIRh5AAfQXAWFAHkANXD8ZkI08gBqYXwTIFhXpCgCtIiMP9EIC/239xqAdRMCq6bve1XyHu5bcwl2tqU/LG+9ah+YPbOGu1hz0roW0r+byym9lIa1/Kdr9Rwnl76VpmsVi8Xq9wiDtzAN/DW7fvr13797Tp0+LtjxbEekPT2v2v2sdDH/HhLj/XesQkQ/Yfy0/xFf75s2b4v/4fL5PP/30kUceaXf1At11Y/jvun9q0nIl75/KdIAXM8QyTSaT2Wy+detWC4dokzbnQVNT01dffVVaWqrfvHXr1vbt2y0WS/M975O/Vvuq0WHeMR3mrqCNdXV1BQUFhhwOUJqBp3Jpcx7cvn37448/rqur0296vV6Hw2FUbYDWY8opIAz9rdPm8WSv11tXV8evLQCIOJPJFB0dbVRpbW4fJCQkTJw40WKxeDweoyoBRJbe4va3uwNvtrAxsJ3u39LCXa0srYWNrT9EW59Ly4doa7VDfNat3yfEGrZ89La+FO14gq08xL3+1mazOT4+Pi8v77PPPhNGaHMeWCyWAQMGpKWlXbhwQQiRkJDwne98Jzk5uYXPhmj7i+jf3sqPX/sO8V8/FaLFP0Zb3wStOUS737v3w6erNc+33YcoLi5es2aN/w8xdOjQP/3pT4EnsWjfWyJQ8y0t39XW/dv3kMgePQxFhechka2VpNJMJtOtW7eOHz9+r93aqs15YDKZLBaL1WrVbyYmJi5atGjUqFFB+7Tw8FZubPkuDiHv6PfnC6Jpmslk8ndUJiYmTp482Ww2G3gIQDkOh8PAt3Q755v6a2A2m5OTk3v37m1UhYC7av7Vr2laYPsAQIj4OEEZQb+DmNQAGIs8gDIC84AwAAxHHkAZtA8AqcgDqKH5oBl5ABiLPIAyaB8AUpEHUAZ5AEhFHkANgQvNxNdPyArAEOQBlEH7AJCKPIAyyANAKvIAymD9ASAVeQA1MN8UkI08gDLoLwKkIg+gDPIAkIo8gDLIA0Aq8gBqIAwA2cgDKCPoagdEAmAs8gDKoIkASEUeQA3Nw4A8AIxFHkAZtA8AqcgDKIM8AKQiD6AM8gCQijyAGhg/AGQjD6CM5qcwAmAg8gDKoL8IkIo8gDLIA0Aq8gBq4HqZgGzkAZRB+wCQijyAMsgDQCryAGrg+miAbOQBlMH4ASAVeQBlsP4AkIo8gDIYPwCkIg+gBsYPANnIAyiD9gEgFXkAZQSNJ0ewJkCHRB5ADUHrk4UQTU1NkaoM0CGRB1AG/UWAVOQBlEF/ESAVeQBl0D4ApCIPoAbmmwKykQdQBu0DQCryAMogDwCpyAMog/FkQCryAGpg/ACQjTyAMjTta29X8gAwFnkAZXD9A0Aq8gBqoL8IkI08gDKYXwRIRR5AGeQBIBV5AGUwfgBIRR5ADVw8GZCNPIAy6C8CpCIPoAzyAJCKPIAyyANAKvIAagi6XibjyYDhyAMog/YBIBV5AGWQB4BU5AHU0DwMyAPAWOQBlMESBEAq8gDKoL8IkIo8gDLIA0Aq8gBq4HzXgGzkAZTB9ZMBqcgDKIP+IkAq8gBqCFqfLMgDwGjkAZQR1F/U1NQUwcoAHQ95AGWw/gCQijyAMugvAqQiD6AG5psCspEHUAbtA0Aq8gDKYP0BIBV5AGXQPgCkIg+gBsYPANnIAyhD0772diUPAGORB1AG108GpCIPoAb6iwDZyAMog/FkQCryAMqgvwiQijyAMjh/ESAVeQA1MH4AyEYeQBmMHwBSkQdQBnkASEUeQBmcvwiQijyAGppfL5ProwHGIg+gDPqLAKnIAyiD9QeAVOQB1MDiA0A28gDKoL8IkIo8gDLIA0Aq8gDKIA8AqcgDqIEwAGQjD6AMIgGQijyAMsgDQCryAGpovj6ZPACMRR5AGaxHA6QiD6AM2geAVOQBlEEeAFKRB1AD10cDZCMPoAyufwBIRR5AGfQXAVKRB1AGeQBIRR5ADYwfALKRB1AG6w8AqcgDKEPTvvZ2JQ8AY5EHUAP9RYBs5AGUwXgyIBV5AGWw/gCQijyAMmgfAFKRB1AD4weAbOQBlEH7AJCKPIAyGD8ApCIPoAzaB4BU5AHUoGladHS0/6bJZIqKiopgfYCOhzyAGqxW66BBg2JiYoQQmqYlJSUNGDAg0pUCOpRQf2E5nc4TJ04YUhWgBV6v12azpaSkVFVVRUdHp6amer1e3nvo5G7evFlTU2NUaaHmgcPhWLt27UMPPWRIbYCWxcTE2Gy2qKioioqKlStXRro6QIR5PJ4LFy4YVVp78sBkMgWeWcztdp89e9aoCgEA2sFkMpnN5lBKaM/4QXR0dP/+/YNONgkAiBRN07p162a320MppD3tA5vNtmDBgi+//LKuri6UYwMAQmcymWJjY6dOnZqWlhZSOe2bxO31eh0Ox/Xr10M5NgAgdCaTKT4+fuDAgSF227QzDwAAHQxjAAAAIcgDAICOPAAACEEeAAB05AEAQAjyAACgIw8AAEKQBwAA3f8AWvkXjAbWDD8AAAAASUVORK5CYII=" alt="image-20240503094303909" style="zoom:67%;"> <p>然后再回到 main.js ，执行：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> pig <span class="token keyword">from</span> <span class="token string">'./pig.js'</span>
</code></pre></div><p>由于 pig.js 已经解析执行过了，那么就可以直接向内存表中拿到执行后的结果 <code>pig</code> 而不用再执行 pig.js 了。</p> <p>接下来向下执行，准备执行动态导入语句：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./dynamic.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>可以发现，动态导入是在执行过程中进行处理的，而静态导入是在解析过程中进行处理的。对于动态的导入，依然是先解析得到完整的 URL 地址，然后再下载模块代码。这里要注意的是，这个模块的下载是<strong>异步的</strong>，JS 并不会等待这个下载的过程，而是直接继续向后执行代码，执行到 log 语句，打印出 <code>main fox pig</code>。</p> <p>等待 dynamic.js 下载完成之后，开始执行 dynamic.js：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> pig <span class="token keyword">from</span> <span class="token string">'./pig.js'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dynamic'</span><span class="token punctuation">,</span>pig<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">'dynamic'</span>
</code></pre></div><p>由于 pig 已经执行过了，直接去内存表中取值，不会重新执行</p> <p>接着执行 log，打印出 <code>dynamic pig</code>，再导出 'dynamic'，同样是新建一个映射表来存储。</p> <p>接着回到 main.js ，import 语句完成，得到一个 promise，执行then方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./dynamic.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> n<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>拿到的 n 其实就是 dynamic 的映射表，打印映射表中的 default，也就是字符串 'dynamic'。所以 log 语句打印出 <code>main dynamic</code>。</p> <p>综上所述，我们得到的输出为：</p> <div class="language-js extra-class"><pre class="language-js"><code>pig
fox pig
main fox pig
dynamic pig
main dynamic
</code></pre></div><p>执行检查：</p> <p><img src="data:image/png;base64,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" alt="image-20240503095452356"></p> <p>和我们的分析完全一致，这就是 ESM 模块化在浏览器中的执行原理~</p> <p>总结：</p> <ol><li>解析：<strong>补全绝对路径</strong>，<strong>下载</strong> JS 文件、提升<strong>顶级静态导入语句</strong></li> <li>执行：<strong>递归</strong>执行，每个模块执行后都会用一个<strong>映射表</strong>来保存模块导出的结果，下次再依赖该模块就不用再次执行这个模块了。</li> <li>动态导入：动态导入只有在执行到这一行代码时，才会开始模块的解析，也就是下载模块。下载的过程是<strong>异步</strong>的，JS会先去执行其他的代码。</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-blog/chat/浏览器指纹.html" class="prev">
        浏览器指纹
      </a></span> <span class="next"><a href="/vuepress-blog/chat/浏览器中的事件循环.html">
        浏览器中的事件循环
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress-blog/assets/js/app.f8677ea4.js" defer></script><script src="/vuepress-blog/assets/js/2.32f56e5c.js" defer></script><script src="/vuepress-blog/assets/js/1.a930a345.js" defer></script><script src="/vuepress-blog/assets/js/25.e56a5813.js" defer></script>
  </body>
</html>
